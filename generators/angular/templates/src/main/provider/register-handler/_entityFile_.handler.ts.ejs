<%
const hasStatusField = this.hasStatusField(fields, this);
%>
import { inject } from "@angular/core";
import { Mediator } from "avanng/domain";
import { <%= entityAngularName %>PageableQueryHandler } from "<%= dasherizedBaseName %>/application/query/<%= entityFolderName %>/<%= entityFileName %>-pageable.query";
import { <%= entityAngularName %>FindByIdQueryHandler } from "<%= dasherizedBaseName %>/application/query/<%= entityFolderName %>/<%= entityFileName %>-find-by-id.query";
import { <%= entityAngularName %>FindAllQueryHandler } from "<%= dasherizedBaseName %>/application/query/<%= entityFolderName %>/<%= entityFileName %>-find-all.query";
import { <%= entityAngularName %>CreateOrUpdateCommandHandler } from "<%= dasherizedBaseName %>/application/command/<%= entityFolderName %>/<%= entityFileName %>-create-or-update.command";
import { <%= entityAngularName %>ChangeStatusCommandHandler } from "<%= dasherizedBaseName %>/application/command/<%= entityFolderName %>/<%= entityFileName %>-change-status.command";
import { <%= entityAngularName %>DeleteCommandHandler } from "<%= dasherizedBaseName %>/application/command/<%= entityFolderName %>/<%= entityFileName %>-delete.command";
import { <%= entityAngularName %>Port } from "<%= dasherizedBaseName %>/http-adapter/<%= entityFolderName %>/<%= entityFileName %>.port";

export function register<%= entityAngularName %>Handlers(mediator: Mediator): void {
    const <%= entityInstance %>PersistencePort = inject(<%= entityAngularName %>Port);

    mediator.register(new <%= entityAngularName %>PageableQueryHandler(<%= entityInstance %>PersistencePort));
<%_ if (!readOnly) { _%>
    mediator.register(new <%= entityAngularName %>FindByIdQueryHandler(<%= entityInstance %>PersistencePort));
<%_ } _%>
<%_ if (otherRelationships.filter(o => !o.otherEntity.readOnly).length) { _%>
    mediator.register(new <%= entityAngularName %>FindAllQueryHandler(<%= entityInstance %>PersistencePort));
<%_ } _%>
<%_ if (!readOnly) { _%>
    mediator.register(new <%= entityAngularName %>CreateOrUpdateCommandHandler(<%= entityInstance %>PersistencePort));
    <%_ if (hasStatusField) { _%>
    mediator.register(new <%= entityAngularName %>ChangeStatusCommandHandler(<%= entityInstance %>PersistencePort));
    <%_ } _%>
    mediator.register(new <%= entityAngularName %>DeleteCommandHandler(<%= entityInstance %>PersistencePort));
<%_ } _%>
}
